<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Habegger | Log in / Register</title>
  <style>
    :root{--primary:#000;--secondary:red;--light:#f7f9fc;--dark:#1d1d1d;--radius:4px;}
    *,:before,:after{box-sizing:border-box}
    body{margin:0;font-family:Arial,Helvetica,sans-serif;background:var(--light);color:var(--dark);line-height:1.5}
    .header{background:#fff;border-bottom:1px solid #dde1e7;padding:1rem 0}
    .header-content{max-width:960px;margin:0 auto;padding:0 1rem}
    .page-title{font-size:1.5rem;font-weight:600;margin:0;color:var(--dark)}
    .main-content{max-width:960px;margin:2rem auto;padding:0 1rem;display:grid;grid-template-columns:1fr;gap:2rem}
    @media (min-width:768px){.main-content{grid-template-columns:1fr 1fr;gap:3rem}}
    .section{background:#fff;padding:2rem;border:1px solid #dde1e7;border-radius:var(--radius);box-shadow:0 2px 4px rgba(0,0,0,.06)}
    .section-title{font-size:1.25rem;font-weight:600;margin:0 0 1rem;color:var(--dark)}
    .section-subtitle{color:#666;margin-bottom:1.5rem;font-size:.95rem}
    .field{margin-bottom:1rem}
    .field label{display:block;font-weight:600;margin-bottom:.5rem;color:var(--dark)}
    .field input,.field select{width:100%;padding:.75rem;border:1px solid #ccc;border-radius:var(--radius);font-size:1rem;transition:border-color .2s ease}
    .field input:focus,.field select:focus{outline:none;border-color:var(--primary)}
    .required{color:var(--secondary)}
    .btn{display:inline-block;background:var(--primary);color:#fff;border:none;padding:.75rem 1.5rem;border-radius:var(--radius);text-decoration:none;cursor:pointer;font-weight:600;font-size:1rem;transition:background .2s ease;width:100%;text-align:center}
    .btn:hover{background:red}
    .btn:disabled{opacity:.5;cursor:not-allowed}
    .btn-secondary{background:var(--primary)}
    .btn-secondary:hover{background:red}
    .forgot-password{margin-top:1rem}
    .forgot-password a{color:var(--primary);text-decoration:none;font-size:.9rem}
    .forgot-password a:hover{text-decoration:underline}
    .info-section{background:#f8f9fa;padding:1.5rem;border-radius:var(--radius);margin-bottom:1.5rem}
    .info-title{font-weight:600;color:var(--primary);margin-bottom:.5rem;font-size:1.1rem}
    .account-accordion details{border:1px solid #e1e5ee;border-radius:var(--radius);margin-bottom:.75rem;background:#fff}
    .account-accordion summary{display:flex;align-items:center;gap:.5rem;cursor:pointer;padding:.75rem 1rem;font-weight:600;list-style:none}
    .account-accordion summary::after{content:"▾";margin-left:auto;transition:transform .25s ease}
    .account-accordion details[open] summary::after{transform:rotate(180deg)}
    .info-list{list-style:none;padding:0 1.5rem 1rem 2rem;margin:0}
    .info-list li{position:relative;margin:.25rem 0;padding-left:.75rem}
    .info-list li::before{content:'•';color:var(--secondary);font-weight:bold;position:absolute;left:0}
    .application-section{background:var(--light);padding:1.5rem;border-radius:var(--radius);text-align:center}
    .application-text{margin-bottom:1.5rem;color:#666}
    .footer{text-align:center;padding:2rem 1rem;font-size:.875rem;color:#666;border-top:1px solid #dde1e7;margin-top:3rem}
    .inline-hint{margin:.25rem 0 0;padding:.5rem .75rem;background:#fdecec;border:1px solid #f5b5b5;border-radius:var(--radius);font-size:.9rem;color:#a40000;display:block}
    .hidden{display:none!important}
  </style>
</head>
<body>
  <header class="header">
    <div class="header-content">
      <h1 class="page-title">Log in | Register</h1>
    </div>
  </header>

  <main class="main-content">
    <!-- Left: Returning customer -->
    <section class="section" id="returning-card">
      <h2 class="section-title">Returning customer</h2>
      <p class="section-subtitle">Login below to checkout with an existing account</p>

      <!-- Region gate always on top -->
      <div class="field">
        <span style="display:block;margin-bottom:.25rem">Required <span class="required">*</span></span>
        <label for="loginRegion">Select Your Region <span class="required">*</span></label>
        <select id="loginRegion" aria-describedby="loginRegionHint" required>
          <option value="" selected>-- Select --</option>
          <option value="PAWV">PENNSYLVANIA/WEST VIRGINIA</option>
          <option value="IN">Indiana</option>
          <option value="AL">Alabama</option>
          <option value="TN">Tennessee</option>
          <option value="ILIO">Illinois/Iowa</option>
          <option value="COL">Columbus</option>
          <option value="NEO">North East Ohio</option>
          <option value="SWO">South West Ohio</option>
          <option value="KY">Kentucky</option>
        </select>
        <div id="loginRegionHint" class="inline-hint">Select a Region to enter username and password</div>
      </div>

      <!-- Login stays visible but disabled until PA/WV -->
      <form id="loginForm" novalidate>
        <div class="field">
          <label for="email">Email Address <span class="required">*</span></label>
          <input type="email" id="email" name="email" placeholder="your@email.com" required disabled />
        </div>
        <div class="field">
          <label for="password">Password <span class="required">*</span></label>
          <input type="password" id="password" name="password" required disabled />
        </div>
        <button type="submit" id="loginBtn" class="btn" disabled>Log In</button>
        <div class="forgot-password">
          <a href="https://habeggercorp.com/myaccount/forgot-password">Forgot password?</a>
        </div>
      </form>

      <!-- Current customer – Request Online Access (hidden until PA/WV) -->
      <div id="existingPAWV" class="hidden" style="margin-top:2rem;padding-top:2rem;border-top:1px solid #dde1e7;">
        <h3 style="margin:0 0 1rem;font-size:1.1rem;">Existing Customers (PA/WV Region)</h3>
        <p style="margin-bottom:1rem;font-size:.95rem;">If you already have a Habegger customer account but need access to our online store, request access below.</p>
        <a class="btn" target="_blank" href="https://forms.habeggercorp.com/new-website-access">Request Online Account</a>
      </div>
    </section>

    <!-- Right: New customer (unchanged except routing rules) -->
    <section class="section">
      <h2 class="section-title">New customer</h2>
      <p class="section-subtitle">Create an account and take advantage of faster checkouts and other great benefits.</p>

      <div class="info-section">
        <div class="info-title">Required Documentation:</div>
        <div class="account-accordion">
          <details>
            <summary>Cash Account</summary>
            <ul class="info-list">
              <li>Copy of EPA / CFC card</li>
              <li>Driver's license</li>
              <li>Tax-exempt certificate (if applicable)</li>
            </ul>
          </details>
          <details>
            <summary>Credit Account</summary>
            <ul class="info-list">
              <li>Copy of EPA / CFC card</li>
              <li>Driver's license</li>
              <li>Trade references (phone / email / acct #)</li>
              <li>Bank reference (phone / email / acct #)</li>
              <li>Tax-exempt certificate (if applicable)</li>
            </ul>
          </details>
        </div>
      </div>

      <div class="application-section">
        <p class="application-text">Ready to apply? Select your region and account type to start your application.</p>

        <div class="field">
          <label for="region">Select your region/state <span class="required">*</span></label>
          <select id="region" required>
            <option value="" disabled selected>Choose...</option>
            <option value="PA">Pennsylvania</option>
            <option value="WV">West Virginia</option>
            <option value="IN">Indiana</option>
            <option value="AL">Alabama</option>
            <option value="TN">Tennessee</option>
            <option value="ILIO">Illinois/Iowa</option>
            <option value="COL">Columbus</option>
            <option value="NEO">North East Ohio</option>
            <option value="SWO">South West Ohio</option>
            <option value="KY">Kentucky</option>
          </select>
        </div>

        <div class="field">
          <label for="accountType">Account type <span class="required">*</span></label>
          <select id="accountType" required>
            <option value="" disabled selected>Choose...</option>
            <option value="Credit">Credit</option>
            <option value="Cash">Cash</option>
          </select>
        </div>

        <button type="button" class="btn btn-secondary" id="startApplication">Start Application</button>
      </div>
    </section>
  </main>

  <footer class="footer">
    <small>&copy; 2025 Habegger Corp</small>
  </footer>

  <script>
    const PORTAL_URL = "https://portal.habeggercorp.com:8443/portal";
    const NEW_APP_URL = "https://app-page-2025.netlify.app/";

    const adobeSignLinks = {
      "PA_Credit":"https://habeggercorp.na2.documents.adobe.com/public/esignWidget?wid=CBFCIBAA3AAABLblqZhCFv43Mkzf8nIaYsR_24wOAGy-zcJKPH15fUxJlyXSv4nxB1gdA2j-xbS_DxzBfe5Q*",
      "PA_Cash":"https://habeggercorp.na2.documents.adobe.com/public/esignWidget?wid=CBFCIBAA3AAABLblqZhAeM8bPSgyZxje5-1r664a0Y_psPFYTq8FwzevmO8EldiokQp8a8PrS9y3oLnWrgKY*",
      "WV_Credit":"https://habeggercorp.na2.documents.adobe.com/public/esignWidget?wid=CBFCIBAA3AAABLblqZhDDCKCH_fmAKAc-qnuk67xln3PHcMm08KNBQtW1pS0KJ1oeIzRTrIBMBj4dnQ4h3sg*",
      "WV_Cash":"https://habeggercorp.na2.documents.adobe.com/public/esignWidget?wid=CBFCIBAA3AAABLblqZhAeM8bPSgyZxje5-1r664a0Y_psPFYTq8FwzevmO8EldiokQp8a8PrS9y3oLnWrgKY*"
    };

    // --- Returning customer gating ---
    const loginRegionSel = document.getElementById("loginRegion");
    const existingPAWV = document.getElementById("existingPAWV");
    const emailEl = document.getElementById("email");
    const passEl = document.getElementById("password");
    const loginBtn = document.getElementById("loginBtn");

    function setLoginEnabled(enabled){
      emailEl.disabled = !enabled;
      passEl.disabled = !enabled;
      loginBtn.disabled = !enabled;
      // Optional: clear on disable
      if(!enabled){ emailEl.value=""; passEl.value=""; }
    }
    // start disabled to match your screenshot
    setLoginEnabled(false);

    loginRegionSel.addEventListener("change", () => {
      const v = loginRegionSel.value;
      if (v === "PAWV") {
        setLoginEnabled(true);
        existingPAWV.classList.remove("hidden"); // show Request Online Access
        document.getElementById("loginRegionHint").classList.add("hidden");
      } else if (v) {
        // any non-PA/WV region: redirect to external portal
        window.location.href = PORTAL_URL;
      }
    });

    document.getElementById("loginForm").addEventListener("submit",(e)=>{
      e.preventDefault();
      alert("Login functionality would be implemented here.");
    });

    // --- New applications routing ---
    document.getElementById("startApplication").addEventListener("click", () => {
      const region = document.getElementById("region").value;
      const accountType = document.getElementById("accountType").value;

      if (!region){ alert("Please select a region."); return; }

      if (region !== "PA" && region !== "WV") {
        window.location.href = NEW_APP_URL; // all non-PA/WV → Netlify page
        return;
      }

      if (!accountType){ alert("Please select an account type."); return; }
      const link = adobeSignLinks[`${region}_${accountType}`];
      if (link){ window.location.href = link; }
      else { alert("We could not find the correct application link for your selection. Please contact customer service."); }
    });
  </script>
</body>
</html>

